(this["webpackJsonptest-junior-react"]=this["webpackJsonptest-junior-react"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/electricite.7de442ff.png"},function(e,t,a){e.exports=a.p+"static/media/gaz.8d489ca6.png"},function(e,t,a){e.exports=a.p+"static/media/logo.d5df1da4.svg"},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),i=a.n(c),l=(a(14),a(1)),s=(a(15),a(6)),o=a.n(s),u=a(7),m=a.n(u),d=function(e){return e.split("-").reverse().join("-")},v=function(e){var t=e.meterTime,a=e.meterDate,n=e.energyType,c=e.label;return r.a.createElement("div",{className:"meters-data-div green"},r.a.createElement("h2",null,c),"Gaz"===c?r.a.createElement("img",{id:"gas",src:m.a,alt:"Logo Gaz",width:"40px"}):r.a.createElement("img",{id:"electricity",src:o.a,alt:"Logo Electricit\xe9",width:"40px"}),r.a.createElement("div",null,r.a.createElement("strong",null,"POD")," : ",n),r.a.createElement("div",null,r.a.createElement("strong",null,"Date de cr\xe9ation")," : ",d(a)),r.a.createElement("div",null,r.a.createElement("strong",null,"Heure de cr\xe9ation")," : ",t))},f=function(e){var t=e.filterValue,a=e.setFilterValue;return r.a.createElement("div",{className:"custom-select"},r.a.createElement("select",{className:"select-selected",value:t,onChange:function(e){a(e.target.value)}},r.a.createElement("option",{value:"0"},"Toute la consommation"),r.a.createElement("option",{value:"2019"},"2019"),r.a.createElement("option",{value:"2020"},"2020"),r.a.createElement("option",{value:"2021"},"2021")))},p=a(2),E=a.n(p),g=a(3),b=function(){var e=Object(g.a)(E.a.mark((function e(t,a,n,r){var c,i,l,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://5e9ed3cdfb467500166c47bb.mockapi.io/api/v1/meter/".concat(t,"/").concat(a));case 2:return c=e.sent,e.next=5,c.json();case 5:for(i=e.sent,l=[],s=0;s<i.length;s++)1===t?l.push({id:i[s].id,date:d(i[s].createdAt.substr(0,10)),time:i[s].createdAt.substr(11,8),indexHigh:i[s].indexHigh}):l.push({id:i[s].id,date:d(i[s].createdAt.substr(0,10)),time:i[s].createdAt.substr(11,8),indexHigh:i[s].indexHigh,indexLow:i[s].indexLow});1===t?n(l):r(l);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),h=function(e){var t=e.item;return r.a.createElement("div",{key:t.id,className:"array-line"},parseInt(t.date.substr(3,2))<12&&parseInt(t.date.substr(0,2))<31?r.a.createElement("div",{className:"block-line"},"Le ",t.date," \xe0 ",t.time):r.a.createElement("div",{className:"block-line"},"La date ",t.date," n'est pas au bon format !"),r.a.createElement("div",{className:"block-line"},r.a.createElement("div",null,"Consommation"),r.a.createElement("div",null,t.indexHigh," kWh")))},y=function(e){var t=e.item;return r.a.createElement("div",{key:t.id,className:"array-line"},parseInt(t.date.substr(3,2))<12&&parseInt(t.date.substr(0,2))<31?r.a.createElement("div",{className:"block-line"},"Le ",t.date," \xe0 ",t.time):r.a.createElement("div",{className:"block-line"},"La date ",t.date," n'est pas au bon format !"),r.a.createElement("div",{className:"block-line"},r.a.createElement("div",null,"Conso Heure Creuse"),r.a.createElement("div",null," ",t.indexLow," kWh")),r.a.createElement("div",{className:"block-line"},r.a.createElement("div",null,"Conso Heure Pleine"),r.a.createElement("div",null,t.indexHigh," kWh")))},k=function(e){var t=e.energyType,a=e.energyId,c=Object(n.useState)([]),i=Object(l.a)(c,2),s=i[0],o=i[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],v=m[1],p=Object(n.useState)("0"),E=Object(l.a)(p,2),g=E[0],k=E[1];Object(n.useEffect)((function(){b(a,t,o,v)}),[a,t]);var w=s.filter((function(e){return e.date.substr(6,4)===g})),j=d.filter((function(e){return e.date.substr(6,4)===g}));return r.a.createElement("div",{className:"energy-data-div white"},r.a.createElement(f,{filterValue:g,setFilterValue:k}),1===a?"0"!==g?w.map((function(e){return r.a.createElement(h,{item:e})})):s.map((function(e){return r.a.createElement(h,{item:e})})):"0"!==g?j.map((function(e){return r.a.createElement(y,{item:e})})):d.map((function(e){return r.a.createElement(y,{item:e})})))},w=function(e){var t=e.children;return r.a.createElement("div",{className:"energy-container"},t)},j=function(e){var t=e.showClickedEnergy,a=e.setShowClickedEnergy;return r.a.createElement("button",{className:"hard-yellow",onClick:function(){return a(!t)}},t?"Voir votre Consommation de Gaz":"Voir votre Consommation \xc9lectrique")},x=a(8),O=a.n(x),N=function(){var e=Object(g.a)(E.a.mark((function e(t,a,n,r){var c,i,l,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://5e9ed3cdfb467500166c47bb.mockapi.io/api/v1/meter/");case 2:return c=e.sent,e.next=5,c.json();case 5:i=e.sent,l={gasPod:i[t-1].pointOfDelivery,electricityPod:i[a-1].pointOfDelivery},n(l),s={gasDate:i[t-1].createdAt.substr(0,10),gasTime:i[t-1].createdAt.substr(11,8),electricityDate:i[a-1].createdAt.substr(0,10),electricityTime:i[a-1].createdAt.substr(11,8)},r(s);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();var T=function(){var e=Object(n.useState)({gasPod:"",electricityPod:""}),t=Object(l.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)({gasDate:"",gasTime:"",electricityDate:"",electricityTime:""}),s=Object(l.a)(i,2),o=s[0],u=s[1],m=a.gasPod,d=a.electricityPod,f=o.gasDate,p=o.gasTime,E=o.electricityDate,g=o.electricityTime,b=Object(n.useState)(!1),h=Object(l.a)(b,2),y=h[0],x=h[1];return Object(n.useEffect)((function(){N(1,2,c,u)}),[]),r.a.createElement("section",{className:"app-container"},r.a.createElement("img",{id:"logo",src:O.a,alt:"logo"}),r.a.createElement(w,null,r.a.createElement(v,{meterTime:y?g:p,meterDate:y?E:f,energyType:y?d:m,label:y?"Electricit\xe9":"Gaz"}),r.a.createElement(k,{energyType:y?"electricity":"gas",energyId:y?2:1})),r.a.createElement(j,{showClickedEnergy:y,setShowClickedEnergy:x}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.b5dad750.chunk.js.map